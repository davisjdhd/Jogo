<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Snake ‚Ä¢ Helo Linda</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  height:100%;
  background:#000;
  font-family:Arial, sans-serif;
  color:#fff;
}
#app{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100%;
}
.screen{ display:none; flex-direction:column; align-items:center; }
.screen.active{ display:flex; }
h1{
  color:#ff3355;
  font-size:42px;
  text-shadow:0 0 25px #ff3355;
}
.menu-btn{
  width:260px;
  padding:16px;
  margin:10px;
  border-radius:18px;
  border:none;
  font-size:20px;
  background:linear-gradient(180deg,#ff3355,#aa0022);
  color:#fff;
}
canvas{
  border-radius:24px;
  box-shadow:0 0 50px #ff335555;
}
#hud{
  width:420px;
  display:flex;
  justify-content:space-between;
  margin:8px 0;
}
#controls{
  margin-top:10px;
  display:grid;
  grid-template-columns:70px 70px 70px;
  gap:10px;
}
#controls button{
  background:#220000;
  border:2px solid #ff3355;
  border-radius:18px;
  font-size:22px;
  color:#fff;
}
.hidden{visibility:hidden;}
</style>
</head>

<body>
<div id="app">

<div id="menu" class="screen active">
  <h1>Helo Linda</h1>
  <button class="menu-btn" onclick="startGame()">Jogar</button>
</div>

<div id="gameScreen" class="screen">
  <div id="hud">
    <span>üçé <span id="scoreEl">0</span></span>
    <button onclick="pauseGame()">‚è∏</button>
    <span>‚ò† <span id="deathEl">0</span></span>
  </div>

  <canvas id="game" width="420" height="420"></canvas>

  <div id="controls">
    <div class="hidden"></div>
    <button onclick="setDir(0,-1)">‚¨Ü</button>
    <div class="hidden"></div>
    <button onclick="setDir(-1,0)">‚¨Ö</button>
    <div class="hidden"></div>
    <button onclick="setDir(1,0)">‚û°</button>
    <div class="hidden"></div>
    <button onclick="setDir(0,1)">‚¨á</button>
    <div class="hidden"></div>
  </div>
</div>

</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const scoreEl=document.getElementById("scoreEl");
const deathEl=document.getElementById("deathEl");

let snake,dir,food;
let score=0,deaths=0;
let speed=120,grow=0;
let running=false,paused=false,last=0;

function startGame(){
  resetGame();
  running=true;
  paused=false;
  last=0;
  show("gameScreen");
  requestAnimationFrame(loop);
}

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function resetGame(){
  snake=[{x:210,y:210}];
  dir={x:1,y:0};
  score=0;
  grow=0;
  spawnFood();
  updateHUD();
}

function pauseGame(){ paused=!paused; }

function setDir(x,y){
  if(dir.x+x===0&&dir.y+y===0) return;
  dir={x,y};
}

/* ‚úî COMIDA NUNCA NASCE NA COBRA */
function spawnFood(){
  let ok=false;
  while(!ok){
    food={
      x:Math.random()*380+20,
      y:Math.random()*380+20
    };
    ok=true;
    for(const s of snake){
      if(Math.hypot(food.x-s.x,food.y-s.y)<12){
        ok=false;
        break;
      }
    }
  }
}

function update(dt){
  const h=snake[0];
  const nx=h.x+dir.x*speed*dt;
  const ny=h.y+dir.y*speed*dt;

  /* parede */
  if(nx<6||ny<6||nx>414||ny>414){
    deaths++; updateHUD(); running=false; show("menu"); return;
  }

  snake.unshift({x:nx,y:ny});

  /* comer */
  if(Math.hypot(nx-food.x,ny-food.y)<10){
    score++;
    grow+=4;
    spawnFood();
    updateHUD();
  }

  /* remove cauda ANTES da colis√£o */
  if(grow>0) grow--;
  else snake.pop();

  /* ‚úî colis√£o correta com o corpo */
  for(let i=1;i<snake.length;i++){
    if(Math.hypot(nx-snake[i].x,ny-snake[i].y)<8){
      deaths++; updateHUD(); running=false; show("menu"); return;
    }
  }
}

function draw(){
  ctx.fillStyle="#050505";
  ctx.fillRect(0,0,420,420);

  ctx.fillStyle="#ff3355";
  ctx.beginPath();
  ctx.arc(food.x,food.y,6,0,Math.PI*2);
  ctx.fill();

  snake.forEach(s=>{
    ctx.fillStyle="#ff7777";
    ctx.beginPath();
    ctx.arc(s.x,s.y,6,0,Math.PI*2);
    ctx.fill();
  });
}

function updateHUD(){
  scoreEl.textContent=score;
  deathEl.textContent=deaths;
}

function loop(t){
  if(!running||paused) return;
  if(!last) last=t;
  const dt=(t-last)/1000;
  last=t;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
</script>
</body>
</html>
