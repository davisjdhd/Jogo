<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Snake ‚Ä¢ Helo Linda</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#6a00ff">

<style>
html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
  font-family:Arial, sans-serif;
  color:#fff;
}

#app{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* TELAS */
.screen{
  position:absolute;
  inset:0;
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}

.screen.active{
  display:flex;
  pointer-events:auto;
}

h1{
  color:#ff3355;
  font-size:42px;
  text-shadow:0 0 25px #ff3355;
}

.menu-btn{
  width:260px;
  padding:16px;
  margin:10px;
  border-radius:18px;
  border:none;
  font-size:20px;
  background:linear-gradient(180deg,#ff3355,#aa0022);
  color:#fff;
  box-shadow:0 0 30px #ff335599;
}

select{
  width:260px;
  padding:10px;
  margin:6px;
  border-radius:14px;
  font-size:16px;
}

/* GAME */
canvas{
  width:90vw;
  max-width:360px;
  aspect-ratio:1/1;
  border-radius:20px;
  box-shadow:0 0 35px #ff335555;
}

#hud{
  width:100%;
  max-width:360px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:4px 0;
}

#hud button{
  border:none;
  border-radius:10px;
  padding:6px 14px;
  background:#ff3355;
  color:#fff;
}

#controls{
  margin-top:6px;
  display:grid;
  grid-template-columns:60px 60px 60px;
  gap:8px;
}

#controls button{
  height:56px;
  background:#220000;
  border:2px solid #ff3355;
  border-radius:16px;
  font-size:20px;
  color:#fff;
}

.hidden{visibility:hidden;}
</style>
</head>

<body>
<div id="app">

<!-- MENU -->
<div id="menu" class="screen active">
  <h1>Helo Linda</h1>
  <button class="menu-btn" onclick="startGame()">Jogar</button>
  <button class="menu-btn" onclick="openConfig()">Configura√ß√µes</button>
</div>

<!-- CONFIG -->
<div id="config" class="screen">
  <h2>Configura√ß√µes</h2>

  <label>Gr√°fico</label>
  <select onchange="settings.graphics=this.value">
    <option value="low">Baixo</option>
    <option value="normal">Normal</option>
    <option value="high" selected>Alto</option>
  </select>

  <label>Cor do mapa</label>
  <select onchange="settings.mapColor=this.value">
    <option value="#ff3355">Vermelho</option>
    <option value="#4cc9f0">Azul</option>
    <option value="#a100ff">Roxo</option>
    <option value="#2ec4b6">Verde</option>
    <option value="#ff69b4">Rosa</option>
  </select>

  <label>Cor da cobrinha</label>
  <select onchange="settings.snakeColor=this.value">
    <option value="#ff7777">Vermelha</option>
    <option value="#2ec4b6">Verde</option>
    <option value="#4cc9f0">Azul</option>
    <option value="#5a00b8">Roxa</option>
    <option value="#ffffff">Branca</option>
  </select>

  <button class="menu-btn" onclick="backMenu()">Voltar</button>
</div>

<!-- PAUSE -->
<div id="pause" class="screen">
  <h2>Pausado</h2>
  <button class="menu-btn" onclick="resumeGame()">Retornar</button>
  <button class="menu-btn" onclick="resetFromPause()">Resetar</button>
  <button class="menu-btn" onclick="backMenu()">Menu</button>
</div>

<!-- GAME -->
<div id="gameScreen" class="screen">
  <div id="hud">
    <span>üçé <span id="scoreEl">0</span></span>
    <button onclick="pauseGame()">‚è∏</button>
    <span>‚ò† <span id="deathEl">0</span></span>
  </div>

  <canvas id="game"></canvas>

  <div id="controls">
    <div class="hidden"></div>
    <button onclick="setDir(0,-1)">‚¨Ü</button>
    <div class="hidden"></div>
    <button onclick="setDir(-1,0)">‚¨Ö</button>
    <div class="hidden"></div>
    <button onclick="setDir(1,0)">‚û°</button>
    <div class="hidden"></div>
    <button onclick="setDir(0,1)">‚¨á</button>
    <div class="hidden"></div>
  </div>
</div>

</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
  const size = Math.min(window.innerWidth, window.innerHeight) - 140;
  canvas.width = size;
  canvas.height = size;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

const scoreEl=document.getElementById("scoreEl");
const deathEl=document.getElementById("deathEl");

let snake,dir,food;
let scoreValue=0,deathValue=0;
let speed=120,grow=0;
let running=false,paused=false;
let lastTime=0;

const settings={
  graphics:"high",
  mapColor:"#ff3355",
  snakeColor:"#ff7777"
};

function show(id){
  document.querySelectorAll(".screen").forEach(s=>{
    s.classList.remove("active");
    s.style.display="none";
  });
  const el=document.getElementById(id);
  el.classList.add("active");
  el.style.display="flex";
}

function startGame(){
  resetGame();
  running=true;
  paused=false;
  lastTime=0;
  show("gameScreen");
  requestAnimationFrame(loop);
}

function resetGame(){
  snake=[{x:canvas.width/2,y:canvas.height/2}];
  dir={x:1,y:0};
  scoreValue=0;
  grow=0;
  speed=120;
  spawnFood();
  updateHUD();
}

function pauseGame(){ paused=true; show("pause"); }
function resumeGame(){ paused=false; show("gameScreen"); requestAnimationFrame(loop); }
function backMenu(){ running=false; paused=false; show("menu"); }
function openConfig(){ show("config"); }

function setDir(x,y){
  if(paused) return;
  if(dir.x+x===0 && dir.y+y===0) return;
  dir={x,y};
}

function spawnFood(){
  const grid=20;
  food={
    x:Math.floor(Math.random()*(canvas.width/grid))*grid+grid/2,
    y:Math.floor(Math.random()*(canvas.height/grid))*grid+grid/2
  };
}

function update(dt){
  const h=snake[0];
  const nx=h.x+dir.x*speed*dt;
  const ny=h.y+dir.y*speed*dt;

  if(nx<0||ny<0||nx>canvas.width||ny>canvas.height){
    deathValue++; updateHUD(); backMenu(); return;
  }

  snake.unshift({x:nx,y:ny});

  for(let i=1;i<snake.length;i++){
    if(Math.hypot(nx-snake[i].x,ny-snake[i].y)<8){
      deathValue++; updateHUD(); backMenu(); return;
    }
  }

  if(Math.hypot(nx-food.x,ny-food.y)<10){
    scoreValue++; grow+=6;
    if(scoreValue%20===0) speed+=8;
    spawnFood(); updateHUD();
  }

  if(grow>0) grow--;
  else snake.pop();
}

function draw(){
  ctx.fillStyle="#050505";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.strokeStyle=settings.mapColor;
  ctx.globalAlpha=settings.graphics==="high"?0.35:0.2;
  if(settings.graphics!=="low"){
    for(let i=0;i<canvas.width;i+=40){
      ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,canvas.height);ctx.stroke();
      ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(canvas.width,i);ctx.stroke();
    }
  }
  ctx.globalAlpha=1;

  ctx.fillStyle=settings.mapColor;
  ctx.beginPath();
  ctx.arc(food.x,food.y,6,0,Math.PI*2);
  ctx.fill();

  snake.forEach(s=>{
    ctx.fillStyle=settings.snakeColor;
    ctx.beginPath();
    ctx.arc(s.x,s.y,6,0,Math.PI*2);
    ctx.fill();
  });
}

function updateHUD(){
  scoreEl.textContent=scoreValue;
  deathEl.textContent=deathValue;
}

function loop(t){
  if(!running||paused) return;
  if(!lastTime) lastTime=t;
  const dt=(t-lastTime)/1000;
  lastTime=t;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
</script>

<script>
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
